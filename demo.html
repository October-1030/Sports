<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœªæ¥ä¹‹æ˜Ÿ - æ——èˆ°çº§è¿åŠ¨å¤©èµ‹æµ‹è¯„ç³»ç»Ÿ (Ultimate)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <style>
        :root {
            --primary: #0f172a; /* æ·±é‚ƒé»‘è“ */
            --accent: #3b82f6;  /* ç§‘æŠ€è“ */
            --highlight: #f59e0b; /* é‡‘è‰²é«˜å…‰ */
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #334155;
        }

        body {
            font-family: 'PingFang SC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg); color: var(--text);
            margin: 0; padding: 0; line-height: 1.5;
        }

        /* é¡¶éƒ¨é€šæ  */
        .header-bar {
            background: var(--primary); color: white; padding: 20px;
            text-align: center; position: sticky; top: 0; z-index: 99;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header-bar h1 { margin: 0; font-size: 20px; font-weight: 700; letter-spacing: 1px; }
        .header-bar .subtitle { font-size: 11px; opacity: 0.7; text-transform: uppercase; margin-top: 4px; }

        .container { max-width: 800px; margin: 0 auto; padding: 20px 15px 100px; }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: var(--card); border-radius: 12px; padding: 25px;
            margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border: 1px solid #e2e8f0;
        }
        .section-header {
            display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
            border-bottom: 2px solid #f1f5f9; padding-bottom: 12px;
        }
        .section-icon { 
            background: var(--primary); color: white; width: 28px; height: 28px; 
            border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 14px; 
        }
        .section-title { font-weight: 800; font-size: 16px; color: var(--primary); }

        /* ç½‘æ ¼å¸ƒå±€ (è®©é¢˜ç›®çœ‹èµ·æ¥ç´§å‡‘ä¸“ä¸š) */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .grid-2 { grid-template-columns: 1fr; } }

        /* é¢˜ç›®æ ·å¼ */
        .q-box { margin-bottom: 5px; }
        .label { font-size: 13px; font-weight: 700; color: #475569; margin-bottom: 6px; display: block; }
        .select-box, input {
            width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px;
            font-size: 14px; background: #fff; transition: all 0.2s;
        }
        .select-box:focus { border-color: var(--accent); outline: none; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
        .tag-pill {
            font-size: 10px; padding: 2px 6px; border-radius: 4px; 
            background: #eff6ff; color: var(--accent); border: 1px solid #dbeafe;
            margin-left: 5px; vertical-align: middle;
        }

        /* å¼€å…³æ ·å¼ */
        .pro-banner {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 10px 30px -10px rgba(15, 23, 42, 0.5);
        }
        .toggle-switch { position: relative; width: 50px; height: 28px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255,255,255,0.2); border-radius: 34px; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--highlight); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* éšè—åŒºåŸŸåŠ¨ç”» */
        #pro-content { display: none; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }

        /* åº•éƒ¨æäº¤æ  */
        .footer-action {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(255,255,255,0.9); backdrop-filter: blur(10px);
            padding: 15px; text-align: center; border-top: 1px solid #eee; z-index: 100;
        }
        .btn-submit {
            background: var(--primary); color: white; border: none;
            padding: 14px 40px; border-radius: 30px; font-weight: 700; font-size: 16px;
            box-shadow: 0 4px 15px rgba(15, 23, 42, 0.3); cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-submit:hover { transform: translateY(-2px); }

        /* æŠ¥å‘Šå¼¹çª— */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center;
        }
        .report-paper {
            background: white; width: 95%; max-width: 500px; max-height: 90vh;
            border-radius: 16px; overflow-y: auto; position: relative;
        }
        .report-header-img {
            background: var(--primary); height: 120px; position: relative;
            display: flex; align-items: center; justify-content: center; color: white;
        }
        .score-badge {
            font-size: 48px; font-weight: 800; text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .report-body { padding: 20px; }
        
        .radar-box { height: 250px; position: relative; margin: 10px 0; }
        
        .analysis-block {
            background: #f8fafc; border-left: 4px solid var(--accent);
            padding: 15px; margin-top: 15px; border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>

<div class="header-bar">
    <h1>FutureStar Lab</h1>
    <div class="subtitle">Professional Sports Talent Identification System v4.0</div>
</div>

<div class="container">
    
    <div class="card">
        <div class="section-header">
            <div class="section-icon">ID</div>
            <div class="section-title">åŸºç¡€å»ºæ¡£ (Basic Profile)</div>
        </div>
        <div class="grid-2">
            <div class="q-box">
                <label class="label">æµ‹è¯„äººå§“å</label>
                <input type="text" id="childName" placeholder="å§“å">
            </div>
            <div class="q-box">
                <label class="label">æ€§åˆ«</label>
                <select id="gender" class="select-box">
                    <option value="male">ç”· (Male)</option>
                    <option value="female">å¥³ (Female)</option>
                </select>
            </div>
            <div class="q-box">
                <label class="label">çˆ¶äº²èº«é«˜ (cm)</label>
                <input type="number" id="fHeight" placeholder="175">
            </div>
            <div class="q-box">
                <label class="label">æ¯äº²èº«é«˜ (cm)</label>
                <input type="number" id="mHeight" placeholder="163">
            </div>
        </div>
    </div>

    <div class="pro-banner">
        <div>
            <div style="font-weight: 700; font-size: 16px;">æ——èˆ°ç‰ˆæ·±åº¦æµ‹è¯„ (24é¡¹æŒ‡æ ‡)</div>
            <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">åŒ…å«å½¢æ€ã€æœºèƒ½ã€ç¥ç»ã€æ™ºå•†ã€æ¢å¤äº”å¤§ç»´åº¦çš„ç§‘ç ”çº§æ£€æµ‹</div>
        </div>
        <label class="toggle-switch">
            <input type="checkbox" id="proToggle">
            <span class="slider"></span>
        </label>
    </div>

    <div id="pro-content">

        <div class="card">
            <div class="section-header">
                <div class="section-icon">A</div>
                <div class="section-title">ç²¾å¯†å½¢æ€ä¸ç»“æ„ (Morphology)</div>
            </div>
            <div class="grid-2">
                <div class="q-box">
                    <label class="label">1. è‡‚å±•/èº«é«˜æŒ‡æ•° <span class="tag-pill">æ¸¸æ³³/ç¯®çƒ</span></label>
                    <select id="q1" class="select-box"><option value="0">æ­£å¸¸</option><option value="1">è‡‚å±•æ˜æ˜¾æ›´é•¿(>5cm)</option><option value="-1">è‡‚å±•è¾ƒçŸ­</option></select>
                </div>
                <div class="q-box">
                    <label class="label">2. è·Ÿè…±å¤–è§‚å½¢æ€ <span class="tag-pill">å¼¹è·³/çˆ†å‘</span></label>
                    <select id="q2" class="select-box"><option value="0">æ™®é€š</option><option value="2">æé•¿(å°è…¿è‚šä½ç½®å¾ˆé«˜)</option><option value="-1">è¾ƒçŸ­ç²—</option></select>
                </div>
                <div class="q-box">
                    <label class="label">3. æ‰‹æŒ/æ‰‹æŒ‡å½¢æ€ <span class="tag-pill">æŠ“æ¡åŠ›</span></label>
                    <select id="q3" class="select-box"><option value="0">æ™®é€š</option><option value="1">æ‰‹æŒå®½å¤§/æ‰‹æŒ‡ä¿®é•¿</option></select>
                </div>
                <div class="q-box">
                    <label class="label">4. è¶³å¼“å½¢æ€ç­›æŸ¥ <span class="tag-pill">è€åŠ›åŸºç¡€</span></label>
                    <select id="q4" class="select-box"><option value="0">æ­£å¸¸è¶³å¼“</option><option value="-2">æ‰å¹³è¶³</option><option value="1">é«˜è¶³å¼“</option></select>
                </div>
                <div class="q-box">
                    <label class="label">5. é¢ˆéƒ¨å›´åº¦ä¸é•¿åº¦ <span class="tag-pill">å¯¹æŠ—/å®‰å…¨</span></label>
                    <select id="q5" class="select-box"><option value="0">æ™®é€š</option><option value="1">é¢ˆéƒ¨ç²—å£®(æŠ—å‡»æ‰“å¼º)</option><option value="-1">é¢ˆéƒ¨ç»†é•¿</option></select>
                </div>
                <div class="q-box">
                    <label class="label">6. å®¶æ—è¿åŠ¨é—ä¼  <span class="tag-pill">å¤©èµ‹ä¸Šé™</span></label>
                    <select id="q6" class="select-box"><option value="0">æ— ä¸“ä¸šèƒŒæ™¯</option><option value="1">çˆ¶æ¯æœ‰ä¸šä½™è¿åŠ¨ä¹ æƒ¯</option><option value="3">ç›´ç³»äº²å±æœ‰ä¸“ä¸šè¿åŠ¨å‘˜</option></select>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-header">
                <div class="section-icon">B</div>
                <div class="section-title">æ ¸å¿ƒç”Ÿç†æœºèƒ½ (Physiology)</div>
            </div>
            <div class="grid-2">
                <div class="q-box">
                    <label class="label">7. çˆ†å‘åŠ›(ç«‹å®šè·³è¿œ)</label>
                    <select id="q7" class="select-box"><option value="0">ä¸€èˆ¬</option><option value="2">è¿œè¶…åŒé¾„äºº(è¶…èº«é«˜20cm+)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">8. æŸ”éŸ§æ€§(åä½ä½“å‰å±ˆ)</label>
                    <select id="q8" class="select-box"><option value="0">ä¸€èˆ¬</option><option value="1">æ‰‹æŒè¿‡è„šå°–(ä¼˜ç§€)</option><option value="-1">å¾ˆç¡¬</option></select>
                </div>
                <div class="q-box">
                    <label class="label">9. æ ¸å¿ƒè€åŠ›(å¹³æ¿æ”¯æ’‘)</label>
                    <select id="q9" class="select-box"><option value="0"><30ç§’</option><option value="2">>60ç§’(æ ¸å¿ƒå¼º)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">10. æœ‰æ°§è€åŠ›è¡¨ç° <span class="tag-pill">è¶³çƒ/é•¿è·‘</span></label>
                    <select id="q10" class="select-box"><option value="0">è·‘ä¸€ä¼šå°±å–˜</option><option value="2">è·‘å¾ˆä¹…éƒ½ä¸ç´¯(å¿ƒè‚ºå¼º)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">11. é€Ÿåº¦ç´ è´¨(30ç±³è·‘)</label>
                    <select id="q11" class="select-box"><option value="0">ä¸­ç­‰</option><option value="2">ç­çº§å‰ä¸‰å(ç»å¯¹é€Ÿåº¦)</option></select>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-header">
                <div class="section-icon">C</div>
                <div class="section-title">ç¥ç»æ„ŸçŸ¥ä¸åè°ƒ (Neurology)</div>
            </div>
            <div class="grid-2">
                <div class="q-box">
                    <label class="label">12. è§†è§‰ååº”é€Ÿåº¦ <span class="tag-pill">é—¨å°†/ä¹’ç¾½</span></label>
                    <select id="q12" class="select-box"><option value="0">å¸¸æ¥ä¸ä½ä¸œè¥¿</option><option value="2">ç¬é—´æ¥ä½æ‰è½ç‰©(æå¿«)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">13. å¹³è¡¡èƒ½åŠ›(é—­çœ¼å•è„š) <span class="tag-pill">æ»‘é›ª/ä½“æ“</span></label>
                    <select id="q13" class="select-box"><option value="0">æ‘‡æ™ƒ</option><option value="2">çº¹ä¸ä¸åŠ¨(>20ç§’)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">14. åŠ¨ä½œæ¨¡ä»¿èƒ½åŠ› <span class="tag-pill">å­¦ä¹ æ•ˆç‡</span></label>
                    <select id="q14" class="select-box"><option value="0">éœ€åå¤æ•™</option><option value="2">çœ‹ä¸€éå°±èƒ½æ¨¡ä»¿å¤§æ¦‚</option></select>
                </div>
                <div class="q-box">
                    <label class="label">15. èŠ‚å¥æ„Ÿ(å¬éŸ³ä¹) <span class="tag-pill">åè°ƒæ€§</span></label>
                    <select id="q15" class="select-box"><option value="0">ä¸€èˆ¬</option><option value="1">èº«ä½“ä¼šä¸è‡ªè§‰å¡ç‚¹å¾‹åŠ¨</option></select>
                </div>
                <div class="q-box">
                    <label class="label">16. ç©ºé—´æ–¹ä½æ„Ÿ <span class="tag-pill">çƒåœºè§†é‡</span></label>
                    <select id="q16" class="select-box"><option value="0">å®¹æ˜“è¿·è·¯/è½¬å‘</option><option value="2">æ–¹å‘æ„Ÿæå¥½/ä¸æ™•å¤´</option></select>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-header">
                <div class="section-icon">D</div>
                <div class="section-title">å¿ƒç†ç‰¹è´¨ä¸çƒå•† (Psych & IQ)</div>
            </div>
            <div class="grid-2">
                <div class="q-box">
                    <label class="label">17. èƒœè´Ÿæ¬²(é€†å•†) <span class="tag-pill">å† å†›ç‰¹è´¨</span></label>
                    <select id="q17" class="select-box"><option value="0">è¾“äº†æ— æ‰€è°“</option><option value="3">è¾“äº†ä¼šå“­/ç”Ÿæ°”ï¼Œä¸€å®šè¦èµ¢å›æ¥</option></select>
                </div>
                <div class="q-box">
                    <label class="label">18. ä¸“æ³¨åŠ›æŠ—å¹²æ‰° <span class="tag-pill">å°„å‡»/å›´æ£‹</span></label>
                    <select id="q18" class="select-box"><option value="0">æ˜“åˆ†å¿ƒ</option><option value="2">é›·æ‰“ä¸åŠ¨ï¼Œæåº¦ä¸“æ³¨</option></select>
                </div>
                <div class="q-box">
                    <label class="label">19. èƒ†é‡ä¸å†’é™© <span class="tag-pill">æé™è¿åŠ¨</span></label>
                    <select id="q19" class="select-box"><option value="0">è°¨æ…å°å¿ƒ</option><option value="2">å–œæ¬¢åˆºæ¿€/é«˜å¤„/å¤±é‡æ„Ÿ</option></select>
                </div>
                <div class="q-box">
                    <label class="label">20. æˆ˜æœ¯ç†è§£åŠ›(æ¸¸æˆ) <span class="tag-pill">çƒå•†</span></label>
                    <select id="q20" class="select-box"><option value="0">åªé¡¾è‡ªå·±ç©</option><option value="2">èƒ½ç†è§£é…åˆ/é¢„åˆ¤å¯¹æ‰‹æ„å›¾</option></select>
                </div>
                <div class="q-box">
                    <label class="label">21. å›¢é˜Ÿåˆä½œå€¾å‘ <span class="tag-pill">é›†ä½“é¡¹ç›®</span></label>
                    <select id="q21" class="select-box"><option value="0">å–œæ¬¢ç‹¬å¤„</option><option value="1">å–œæ¬¢å’Œå¤§å®¶é…åˆ</option></select>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="section-header">
                <div class="section-icon">E</div>
                <div class="section-title">å¥åº·åŸºç¡€ä¸æ¢å¤ (Health)</div>
            </div>
            <div class="grid-2">
                <div class="q-box">
                    <label class="label">22. ç¡çœ è´¨é‡ <span class="tag-pill">ç”Ÿé•¿å‘è‚²</span></label>
                    <select id="q22" class="select-box"><option value="0">ä¸€èˆ¬/å…¥ç¡æ…¢</option><option value="1">å€’å¤´å°±ç¡ï¼Œè´¨é‡é«˜</option></select>
                </div>
                <div class="q-box">
                    <label class="label">23. è§†åŠ›çŠ¶å†µ <span class="tag-pill">ç²¾å‡†ç±»é¡¹ç›®</span></label>
                    <select id="q23" class="select-box"><option value="0">è¿‘è§†/æˆ´é•œ</option><option value="2">é¹°çœ¼(è§†åŠ›æä½³)</option></select>
                </div>
                <div class="q-box">
                    <label class="label">24. ä¼¤ç—…æ¢å¤é€Ÿåº¦ <span class="tag-pill">èŒä¸šæ½œè´¨</span></label>
                    <select id="q24" class="select-box"><option value="0">ç£•ç¢°åæ¢å¤æ…¢</option><option value="1">çš®å®ï¼Œæ¢å¤å¾ˆå¿«</option></select>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="footer-action">
    <button class="btn-submit" onclick="analyzeData()">ç”Ÿæˆ 24ç»´ æ·±åº¦è¯„ä¼°æŠ¥å‘Š</button>
</div>

<div id="reportModal" class="modal">
    <div class="report-paper" id="paper">
        <div class="report-header-img">
            <div style="text-align:center;">
                <div class="score-badge" id="scoreDisplay">--</div>
                <div style="font-size:12px; opacity:0.9;">TALENT INDEX</div>
            </div>
        </div>

        <div class="report-body">
            <div id="lockScreen" style="text-align:center; padding:40px 20px;">
                <h2 style="color:var(--primary);">ğŸ”’ æ·±åº¦æŠ¥å‘Šå·²é”å®š</h2>
                <p style="color:#666;">æ‚¨æ­£åœ¨ä½¿ç”¨å…è´¹åŸºç¡€ç‰ˆã€‚<br>è§£é”æŸ¥çœ‹ <b>24é¡¹æŒ‡æ ‡æ·±åº¦åˆ†æ</b> åŠ <b>å®šåˆ¶åŒ–é€‰æå»ºè®®</b>ã€‚</p>
                <button onclick="document.getElementById('reportModal').style.display='none'; document.getElementById('proToggle').click();" style="margin-top:20px; padding:10px 25px; background:var(--highlight); color:white; border:none; border-radius:20px; font-weight:bold; cursor:pointer;">å¼€å¯æ——èˆ°ç‰ˆ</button>
            </div>

            <div id="proReportContent" style="display:none;">
                <div style="display:flex; justify-content:space-between; border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:15px;">
                    <span style="font-weight:bold; color:#555;">ğŸ¯ é¢„æµ‹æˆå¹´èº«é«˜ (CMH)</span>
                    <span style="font-weight:800; color:var(--primary);" id="targetH">-- cm</span>
                </div>

                <div class="radar-box">
                    <canvas id="talentRadar"></canvas>
                </div>

                <div class="analysis-block">
                    <h4 style="margin:0 0 10px 0; color:var(--accent);">ğŸ§¬ å¤©èµ‹åŸºå› è§£ç </h4>
                    <p id="analysisText" style="font-size:13px; color:#444; line-height:1.6; margin:0;"></p>
                </div>

                <div class="analysis-block" style="border-left-color:var(--highlight); background:#fffbeb;">
                    <h4 style="margin:0 0 10px 0; color:#d97706;">ğŸ† é»„é‡‘é€‰ææ¨è</h4>
                    <p id="sportRec" style="font-size:14px; font-weight:bold; color:#333; margin:0;"></p>
                </div>

                <button onclick="saveReport()" style="width:100%; margin-top:20px; padding:15px; background:var(--primary); color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">ğŸ“¸ ä¿å­˜ä¸ºé«˜æ¸…å›¾ç‰‡</button>
                <button onclick="closeModal()" style="width:100%; margin-top:10px; padding:10px; background:transparent; border:none; color:#999; cursor:pointer;">å…³é—­</button>
            </div>
        </div>
    </div>
</div>

<script>
    // äº¤äº’é€»è¾‘
    const toggle = document.getElementById('proToggle');
    const proContent = document.getElementById('pro-content');

    toggle.addEventListener('change', (e) => {
        proContent.style.display = e.target.checked ? 'block' : 'none';
        if(e.target.checked) setTimeout(() => window.scrollTo({top: 400, behavior:'smooth'}), 100);
    });

    let radarChart = null;

    function analyzeData() {
        const isPro = toggle.checked;
        const gender = document.getElementById('gender').value;
        const fH = Number(document.getElementById('fHeight').value) || 172;
        const mH = Number(document.getElementById('mHeight').value) || 162;

        // åŸºç¡€è®¡ç®—
        const offset = gender === 'male' ? 13 : -13;
        const targetHeight = (fH + mH + offset) / 2;

        // æ”¶é›†24ä¸ªç»´åº¦åˆ†æ•° (å½’ç±»åˆ°5å¤§èƒ½åŠ›)
        // åˆå§‹åˆ† 60
        let scores = { morph: 60, phys: 60, neuro: 60, iq: 60, health: 60 };

        if(isPro) {
            // Morph (å½¢æ€)
            scores.morph += val('q1')*10 + val('q2')*5 + val('q3')*5 + val('q5')*5 + val('q6')*5;
            if(val('q4') < 0) scores.morph -= 5;
            
            // Phys (æœºèƒ½)
            scores.phys += val('q7')*8 + val('q8')*5 + val('q9')*5 + val('q10')*8 + val('q11')*8;
            
            // Neuro (ç¥ç»)
            scores.neuro += val('q12')*8 + val('q13')*8 + val('q14')*5 + val('q15')*5 + val('q16')*5;
            
            // IQ (å¿ƒç†/æ™ºå•†)
            scores.iq += val('q17')*10 + val('q18')*5 + val('q19')*5 + val('q20')*8 + val('q21')*5;
            
            // Health (å¥åº·)
            scores.health += val('q22')*5 + val('q23')*5 + val('q24')*5;
        }

        // ä¿®æ­£åˆ†æ•°èŒƒå›´ 0-99
        Object.keys(scores).forEach(k => scores[k] = Math.min(Math.max(scores[k], 40), 99));
        
        const totalScore = Math.round((scores.morph + scores.phys + scores.neuro + scores.iq + scores.health) / 5);

        // æ˜¾ç¤ºå¼¹çª—
        document.getElementById('reportModal').style.display = 'flex';
        document.getElementById('scoreDisplay').innerText = isPro ? totalScore : '?';

        if(isPro) {
            document.getElementById('lockScreen').style.display = 'none';
            document.getElementById('proReportContent').style.display = 'block';
            document.getElementById('targetH').innerText = `${targetHeight.toFixed(1)} Â± 5 cm`;
            
            // ç”Ÿæˆæ·±åº¦æ–‡æ¡ˆ
            let text = "";
            let rec = "";

            // é€»è¾‘æ ‘
            if(scores.iq > 85 && scores.neuro > 80) {
                text = "æµ‹è¯„æ˜¾ç¤ºè¯¥ç”Ÿå…·å¤‡**æé«˜çš„è¿åŠ¨æ™ºå•†**å’Œ**ç¥ç»ååº”é€Ÿåº¦**ã€‚è¿™ç±»å­©å­é€šå¸¸æ˜¯çƒåœºä¸Šçš„å¤§è„‘ï¼Œå–„äºé¢„åˆ¤å’Œç»„ç»‡ã€‚";
                rec = "âš½ è¶³çƒä¸­åœº / ğŸ€ æ§çƒåå« / ğŸ¤º å‡»å‰‘";
            } else if (scores.morph > 85 && val('q1')==1) {
                text = "èº«ä½“å½¢æ€å¤©èµ‹å¼‚ç¦€ï¼Œå°¤å…¶æ˜¯**è‡‚å±•**å’Œ**è·Ÿè…±**ä¼˜åŠ¿æ˜¾è‘—ã€‚è¿™æ˜¯è€å¤©èµé¥­åƒçš„ç±»å‹ï¼Œå¿…é¡»å‘æŒ¥è‚¢ä½“æ æ†ä¼˜åŠ¿ã€‚";
                rec = "ğŸŠ æ¸¸æ³³ / ğŸ¾ ç½‘çƒ / ğŸ æ’çƒ";
            } else if (scores.phys > 85 && val('q10')==2) {
                text = "æ‹¥æœ‰ä»¤äººæƒŠå¹çš„**å¿ƒè‚ºè€åŠ›**å’Œ**æ¢å¤èƒ½åŠ›**ã€‚è¿™ç§ä½“è´¨éå¸¸é€‚åˆé•¿è·ç¦»ã€é«˜æ¶ˆè€—çš„é¡¹ç›®ã€‚";
                rec = "ğŸƒ ä¸­é•¿è·‘ / ğŸš´ å…¬è·¯è‡ªè¡Œè½¦ / ğŸš£ èµ›è‰‡";
            } else if (val('q17')==3) {
                text = "æ‹¥æœ‰é¡¶çº§çš„**å† å†›å¿ƒæ€ï¼ˆèƒœè´Ÿæ¬²ï¼‰**ã€‚åœ¨é€†å¢ƒä¸­å¾€å¾€èƒ½çˆ†å‘å‡ºæƒŠäººèƒ½é‡ï¼Œé€‚åˆç”±äºä¸ªäººè‹±é›„ä¸»ä¹‰è‰²å½©çš„å¯¹æŠ—é¡¹ç›®ã€‚";
                rec = "ğŸ¥Š æ ¼æ–— / ğŸ¾ å•æ‰“ç½‘çƒ / ğŸï¸ èµ›è½¦";
            } else {
                text = "å„é¡¹ç´ è´¨å‡è¡¡å‘å±•ï¼Œå…·å¤‡è‰¯å¥½çš„è®­ç»ƒå¯å¡‘æ€§ã€‚å»ºè®®å…ˆé€šè¿‡ç”°å¾„æ‰“å¥½åŸºç¡€ï¼Œå†æ ¹æ®å…´è¶£å‘å±•ã€‚";
                rec = "ğŸƒ ç”°å¾„å…¨èƒ½ / ğŸ€ ç»¼åˆçƒç±»";
            }

            document.getElementById('analysisText').innerHTML = text;
            document.getElementById('sportRec').innerText = rec;

            renderRadar(scores);
        } else {
            document.getElementById('lockScreen').style.display = 'block';
            document.getElementById('proReportContent').style.display = 'none';
        }
    }

    function val(id) {
        return Number(document.getElementById(id).value);
    }

    function renderRadar(data) {
        const ctx = document.getElementById('talentRadar').getContext('2d');
        if(radarChart) radarChart.destroy();

        radarChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['å½¢æ€ç»“æ„', 'è¿åŠ¨æœºèƒ½', 'ç¥ç»æ„ŸçŸ¥', 'çƒå•†/å¿ƒç†', 'å¥åº·æ¢å¤'],
                datasets: [{
                    label: 'å¤©èµ‹æ¨¡å‹',
                    data: [data.morph, data.phys, data.neuro, data.iq, data.health],
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: '#3b82f6',
                    pointBackgroundColor: '#fff',
                    borderWidth: 2
                }]
            },
            options: {
                scales: { r: { beginAtZero: true, max: 100, ticks: {display:false} } },
                plugins: { legend: {display:false} }
            }
        });
    }

    function closeModal() {
        document.getElementById('reportModal').style.display = 'none';
    }

    function saveReport() {
        html2canvas(document.getElementById('paper')).then(canvas => {
            const link = document.createElement('a');
            link.download = 'ä¸“ä¸šå¤©èµ‹æŠ¥å‘Š.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }
</script>

</body>
</html>